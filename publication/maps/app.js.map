{"version":3,"sources":["app.js"],"names":["actuales","siguienteHora","CLIENT_ID","DISCOVERY_DOCS","SCOPES","authorizeButton","document","getElementById","handleClientLoad","iniciarReloj","gapi","load","initClient","client","init","discoveryDocs","clientId","scope","then","auth2","getAuthInstance","isSignedIn","listen","updateSigninStatus","get","onclick","handleAuthClick","$","hide","listUpcomingEvents","setInterval","show","event","signIn","handleSignoutClick","signOut","events","calendar","list","Date","toISOString","response","result","items","console","log","length","filtraEventos","diffInMinutes","date1","date2","diff","Math","abs","minutes","floor","eventos","horaActual","inicio","each","key","evento","start","dateTime","dA","getDate","dE","pintarEventos","contEventos","listEventos","html","index","val","color","location","undefined","lugar","nombre","replace","contMapas","append","summary","formartFecha","pintarMapa","svg","jQuery","fecha","tipo","fechaFinal","fechaIngresa","h","getHours","m","getMinutes","us","monthNames","getMonth","d","y","getFullYear","today","mont","day","year","s","getSeconds","checkTime","innerHTML","t","setTimeout","i"],"mappings":";;AACA,IAAIA,WAAW,EAAf;AAAA,IACIC,gBAAgB,EADpB;AAAA,IAECC,YAAY,0EAFb;AAAA,IAGCC,iBAAiB,CAAC,+DAAD,CAHlB;AAAA,IAICC,SAAS,mDAJV;AAAA,IAKCC,kBAAkBC,SAASC,cAAT,CAAwB,kBAAxB,CALnB;;AAOA;;;AAGA,SAASC,gBAAT,GAA4B;AAC3BC;AACGC,SAAKC,IAAL,CAAU,cAAV,EAA0BC,UAA1B;AACH;;AAED;;;;AAIA,SAASA,UAAT,GAAsB;AAClBF,SAAKG,MAAL,CAAYC,IAAZ,CAAiB;AACbC,uBAAeZ,cADF;AAEba,kBAAUd,SAFG;AAGbe,eAAOb;AAHM,KAAjB,EAIGc,IAJH,CAIQ,YAAY;AAChB;AACAR,aAAKS,KAAL,CAAWC,eAAX,GAA6BC,UAA7B,CAAwCC,MAAxC,CAA+CC,kBAA/C;;AAEA;AACAA,2BAAmBb,KAAKS,KAAL,CAAWC,eAAX,GAA6BC,UAA7B,CAAwCG,GAAxC,EAAnB;AACAnB,wBAAgBoB,OAAhB,GAA0BC,eAA1B;AACH,KAXD;AAYH;;AAED;;;;AAIA,SAASH,kBAAT,CAA4BF,UAA5B,EAAwC;AACpC,QAAIA,UAAJ,EAAgB;AACfM,UAAE,gBAAF,EAAoBC,IAApB;AACGC;AACHC,oBAAY,YAAU;AAAElB;AAAc,SAAtC,EAAwC,OAAxC;AACA;AACA,KALD,MAKK;AACJ;AACAe,UAAE,gBAAF,EAAoBI,IAApB;AAEA;AACJ;;AAED;;;AAGA,SAASL,eAAT,CAAyBM,KAAzB,EAAgC;AAC5BtB,SAAKS,KAAL,CAAWC,eAAX,GAA6Ba,MAA7B;AACH;;AAED;;;AAGA,SAASC,kBAAT,CAA4BF,KAA5B,EAAmC;AAC/BtB,SAAKS,KAAL,CAAWC,eAAX,GAA6Be,OAA7B;AACH;;AAGD;;;;;AAKA,SAASN,kBAAT,GAA8B;AAC1B,QAAIO,MAAJ;;AAEA1B,SAAKG,MAAL,CAAYwB,QAAZ,CAAqBD,MAArB,CAA4BE,IAA5B,CAAiC;AAC7B,sBAAc,SADe;AAE7B,mBAAY,IAAIC,IAAJ,EAAD,CAAaC,WAAb,EAFkB;AAG7B,uBAAe,KAHc;AAI7B,wBAAgB,IAJa;AAK7B,sBAAc,EALe;AAM7B,mBAAW;AANkB,KAAjC,EAOGtB,IAPH,CAOQ,UAASuB,QAAT,EAAmB;AACvBL,iBAASK,SAASC,MAAT,CAAgBC,KAAzB;AACAC,gBAAQC,GAAR,CAAYT,MAAZ;AACA,YAAGA,OAAOU,MAAP,GAAc,CAAjB,EAAmB;AAClBnB,cAAE,aAAF,EAAiBC,IAAjB;AACAD,cAAE,oCAAF,EAAwCI,IAAxC;;AAEAgB,0BAAcX,MAAd;AACA,SALD,MAKK;AACJT,cAAE,oCAAF,EAAwCC,IAAxC;AACAD,cAAE,aAAF,EAAiBI,IAAjB;AACA;AACJ,KAnBD;AAoBH;;AAED,SAASiB,aAAT,CAAuBC,KAAvB,EAA6BC,KAA7B,EAAoC;AAChC,QAAIC,OAAOC,KAAKC,GAAL,CAASJ,QAAQC,KAAjB,CAAX;AACA,QAAII,UAAUF,KAAKG,KAAL,CAAYJ,OAAK,IAAN,GAAY,EAAvB,CAAd;AACA,WAAOG,OAAP;AACH;;AAED,SAASP,aAAT,CAAuBS,OAAvB,EAAgC;AAC9B,QAAIC,aAAa,IAAIlB,IAAJ,EAAjB;AAAA,QACAmB,MADA;AAEDd,YAAQC,GAAR,CAAYW,OAAZ;AACG7B,MAAEgC,IAAF,CAAQH,OAAR,EAAiB,UAAUI,GAAV,EAAeC,MAAf,EAAwB;AACxCH,iBAAS,IAAInB,IAAJ,CAASsB,OAAOC,KAAP,CAAaC,QAAtB,CAAT;AACA;AACH,YAAIC,KAAKP,WAAWQ,OAAX,EAAT;AACM,YAAIC,KAAKR,OAAOO,OAAP,EAAT;AACArB,gBAAQC,GAAR,CAAY,IAAZ,EAAiBmB,EAAjB;AACApB,gBAAQC,GAAR,CAAY,IAAZ,EAAiBqB,EAAjB;AACA,YAAIF,MAAME,EAAV,EAAc;AACVlE,qBAASA,SAAS8C,MAAlB,IAA4Be,MAA5B;AACH,SAFD,MAEO;AACH5D,0BAAcA,cAAc6C,MAA5B,IAAsCe,MAAtC;AACH;AACJ,KAZD;AAaAM;AACH;AACD,SAASA,aAAT,GAAwB;AACvB,QAAIC,cAAczC,EAAE,UAAF,CAAlB;AAAA,QACC0C,cAAc1C,EAAE,uBAAF,CADf;AAEA;AACAyC,gBAAYE,IAAZ,CAAiB,EAAjB;AACA3C,MAAEgC,IAAF,CAAO3D,QAAP,EAAiB,UAASuE,KAAT,EAAgBC,GAAhB,EAAqB;AAC/B,YAAIC,QAAQ,SAAZ;AACA7B,gBAAQC,GAAR,CAAY2B,IAAIE,QAAhB;AACA,YAAGF,IAAIE,QAAJ,KAAeC,SAAlB,EAA4B;AACxB,gBAAIC,QAAQJ,IAAIE,QAAhB;AAAA,gBACIG,SAASD,MAAME,OAAN,CAAc,GAAd,EAAmB,GAAnB,CADb;AAEAC,sBAAUC,MAAV,CAAiB,uDAAqDR,IAAIE,QAAzD,GAAkE,+BAAnF;AACH,SAJD,MAIK;AACD,gBAAIG,SAAS,SAAb;AACH;AACN;AACAT,oBAAYY,MAAZ,CAAmB,gFAA8ER,IAAIS,OAAlF,GAA0F,+BAA1F,GAA0HC,aAAaV,IAAIV,KAAJ,CAAUC,QAAvB,EAAgC,CAAhC,CAA1H,GAA6J,4IAA7J,GAA0SmB,aAAaV,IAAIV,KAAJ,CAAUC,QAAvB,EAAgC,CAAhC,CAA1S,GAA6U,+EAA7U,GAA6ZS,IAAIE,QAAja,GAA0a,2JAA1a,GAAskBF,IAAIE,QAA1kB,GAAmlB,kBAAtmB;AACD,KAZD;AAaA;AACAS;AACAd,gBAAYC,IAAZ,CAAiB,EAAjB;AACA;AACA3C,MAAEgC,IAAF,CAAO1D,aAAP,EAAsB,UAASsE,KAAT,EAAgBC,GAAhB,EAAqB;AAC1CH,oBAAYW,MAAZ,CAAmB,aAAWR,IAAIS,OAAf,GAAuB,WAAvB,GAAmCC,aAAaV,IAAIV,KAAJ,CAAUC,QAAvB,EAAgC,CAAhC,CAAnC,GAAsE,WAAtE,GAAkFmB,aAAaV,IAAIV,KAAJ,CAAUC,QAAvB,EAAgC,CAAhC,CAAlF,GAAqH,WAArH,GAAiIS,IAAIE,QAArI,GAA8I,YAAjK;AACA,KAFD;AAIA;;AAED,SAASS,UAAT,GAAsB;AACrB,QAAIC,MAAIC,OAAO,EAAP,CAAR;AACA;;AAED,SAASH,YAAT,CAAsBI,KAAtB,EAA4BC,IAA5B,EAAiC;AAChC,QAAIC,UAAJ;AAAA,QACCC,eAAe,IAAIlD,IAAJ,CAAS+C,KAAT,CADhB;;AAGA,YAAOC,IAAP;AACC,aAAK,CAAL;AACC;AACA,gBAAIG,IAAID,aAAaE,QAAb,EAAR;AACA,gBAAIC,IAAIH,aAAaI,UAAb,EAAR;;AAEA,gBAAIC,KAAK,IAAT;AACA,gBAAGJ,KAAG,EAAN,EAAS;AACRA,oBAAEA,IAAE,EAAJ;AACAI,qBAAK,IAAL;AACA;AACD,gBAAGF,IAAE,EAAL,EAAQ;AACPA,oBAAI,MAAIA,CAAR;AACA;AACDJ,yBAAaE,IAAE,GAAF,GAAME,CAAN,GAAQ,GAAR,GAAYE,EAAzB;AACD;AACA,aAAK,CAAL;AACC;AACA,gBAAIC,aAAa,CAAC,SAAD,EAAY,UAAZ,EAAwB,OAAxB,EAAiC,OAAjC,EAA0C,KAA1C,EAAiD,MAAjD,EAAyD,MAAzD,EAAiE,QAAjE,EAA2E,WAA3E,EAAwF,SAAxF,EAAmG,UAAnG,EAA+G,UAA/G,CAAjB;AACA,gBAAIH,IAAIG,WAAWN,aAAaO,QAAb,EAAX,CAAR;AACA,gBAAIC,IAAIR,aAAaxB,OAAb,EAAR;AACA,gBAAIiC,IAAIT,aAAaU,WAAb,EAAR;AACAX,yBAAaI,IAAE,GAAF,GAAMK,CAAN,GAAQ,GAAR,GAAYC,CAAzB;AACD;AAvBD;;AA0BA,WAAOV,UAAP;AACA;AACD,SAAS/E,YAAT,GAAuB;AACtB,QAAI2F,QAAQ,IAAI7D,IAAJ,EAAZ;AAAA,QACO8D,OAAOD,MAAMJ,QAAN,EADd;AAAA,QAEOM,MAAMF,MAAMnC,OAAN,EAFb;AAAA,QAGOsC,OAAOH,MAAMD,WAAN,EAHd;AAAA,QAIOT,IAAIU,MAAMT,QAAN,EAJX;AAAA,QAKOC,IAAIQ,MAAMP,UAAN,EALX;AAAA,QAMOW,IAAIJ,MAAMK,UAAN,EANX;AAAA,QAOOb,IAAIc,UAAUd,CAAV,CAPX;AAAA,QAQOY,IAAIE,UAAUF,CAAV,CARX;AASG,QAAIT,aAAa,CAAC,SAAD,EAAY,UAAZ,EAAwB,OAAxB,EAAiC,OAAjC,EAA0C,KAA1C,EAAiD,MAAjD,EACnB,MADmB,EACX,QADW,EACD,WADC,EACY,SADZ,EACuB,UADvB,EACmC,UADnC,CAAjB;AAGAzF,aAASC,cAAT,CAAwB,OAAxB,EAAiCoG,SAAjC,GAA6CZ,WAAWM,IAAX,IAAiB,GAAjB,GAAqBC,GAArB,GAAyB,GAAzB,GAA6BC,IAA7B,GAAkC,GAAlC,GAAsCb,CAAtC,GAA0C,GAA1C,GAAgDE,CAAhD,GAAoD,GAApD,GAAwDY,CAArG;AACA,QAAII,IAAIC,WAAWpG,YAAX,EAAyB,GAAzB,CAAR;AACH;AACD,SAASiG,SAAT,CAAmBI,CAAnB,EAAsB;AAClB,QAAIA,IAAI,EAAR,EAAY;AAACA,YAAI,MAAMA,CAAV;AAAY,MADP,CACU;AAC5B,WAAOA,CAAP;AACH","file":"../es6/app.js","sourcesContent":["\nvar actuales = [],\n    siguienteHora = [],\n\tCLIENT_ID = '274125328383-lem62po56ehptmnu98dgts88bnt1n2o2.apps.googleusercontent.com',\n\tDISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"],\n\tSCOPES = \"https://www.googleapis.com/auth/calendar.readonly\",\n\tauthorizeButton = document.getElementById('authorize-button');\n\n/**\n *  On load, called to load the auth2 library and API client library.\n */\nfunction handleClientLoad() {\n\tiniciarReloj();\n    gapi.load('client:auth2', initClient);\n}\n\n/**\n *  Initializes the API client library and sets up sign-in state\n *  listeners.\n */\nfunction initClient() {\n    gapi.client.init({\n        discoveryDocs: DISCOVERY_DOCS,\n        clientId: CLIENT_ID,\n        scope: SCOPES\n    }).then(function () {\n        // Listen for sign-in state changes.\n        gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);\n\n        // Handle the initial sign-in state.\n        updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n        authorizeButton.onclick = handleAuthClick;\n    });\n}\n\n/**\n *  Called when the signed in status changes, to update the UI\n *  appropriately. After a sign-in, the API is called.\n */\nfunction updateSigninStatus(isSignedIn) {\n    if (isSignedIn) {\n    \t$(\".traer-eventos\").hide();\n        listUpcomingEvents();\n    \tsetInterval(function(){ initClient() }, 1800000);\n    \t//Oculto el boton\n    }else{\n    \t//Muestro el Boton\n    \t$(\".traer-eventos\").show();\n\n    }\n}\n\n/**\n *  Sign in the user upon button click.\n */\nfunction handleAuthClick(event) {\n    gapi.auth2.getAuthInstance().signIn();\n}\n\n/**\n *  Sign out the user upon button click.\n */\nfunction handleSignoutClick(event) {\n    gapi.auth2.getAuthInstance().signOut();\n}\n\n\n/**\n * Print the summary and start datetime/date of the next ten events in\n * the authorized user's calendar. If no events are found an\n * appropriate message is printed.\n */\nfunction listUpcomingEvents() {\n    var events;\n\n    gapi.client.calendar.events.list({\n        'calendarId': 'primary',\n        'timeMin': (new Date()).toISOString(),\n        'showDeleted': false,\n        'singleEvents': true,\n        'maxResults': 10,\n        'orderBy': 'startTime'\n    }).then(function(response) {\n        events = response.result.items;\n        console.log(events)\n        if(events.length>0){\n        \t$(\".no-eventos\").hide();\n        \t$(\".cont-eventos-actual,#tableEventos\").show();\n\n        \tfiltraEventos(events);\n        }else{\n        \t$(\".cont-eventos-actual,#tableEventos\").hide();\n        \t$(\".no-eventos\").show();\n        }\n    });\n}\n\nfunction diffInMinutes(date1,date2) {\n    var diff = Math.abs(date1 - date2);\n    var minutes = Math.floor((diff/1000)/60);\n    return minutes;\n}\n\nfunction filtraEventos(eventos) {\n\t\tvar horaActual = new Date(),\n\t\tinicio;\n\tconsole.log(eventos);\n    $.each( eventos, function( key, evento ) {\n    \tinicio = new Date(evento.start.dateTime);\n    \t//mira si hay eventos que ya iniciaros\n\t\tvar dA = horaActual.getDate();\n        var dE = inicio.getDate();\n        console.log(\"dA\",dA);\n        console.log(\"dE\",dE);\n        if (dA == dE) {\n            actuales[actuales.length] = evento;\n        } else {\n            siguienteHora[siguienteHora.length] = evento;\n        }\n    });\n    pintarEventos();\n}\nfunction pintarEventos(){\n\tvar contEventos = $(\"#eventos\"),\n\t\tlistEventos = $(\"#tableEventos > tbody\")\n\t//Aqui voy a recorrer los eventos actuales y ponerlos en el html\n\tcontEventos.html('');\n\t$.each(actuales, function(index, val) {\n        var color = \"#4F338B\";\n        console.log(val.location);\n        if(val.location!==undefined){\n            var lugar = val.location,\n                nombre = lugar.replace(\"-\", \" \");\n            contMapas.append('<img class=\"img-ruta\" src=\"images/rutas-mapa/Ruta-'+val.location+'.png\" class=\"animacion-ruta\">');\n        }else{\n            var nombre = \"No site\";\n        }\n\t\t /* iterate through array or object */\n\t\t contEventos.append('<div class=\"eventos\" id=\"evento-1\"><h2><i class=\"img-icono-calendario\"></i>'+val.summary+'</h2><p class=\"fecha-evento\">'+formartFecha(val.start.dateTime,2)+'</p><div class=\"clear\"></div><hr><div class=\"conte-hora-lugar-evento\">  <div class=\"cont-info-evento\"><i class=\"icono-hora-evento\"></i><p>'+formartFecha(val.start.dateTime,1)+'</p></div><div class=\"cont-info-evento\"><i class=\"icono-lugar-evento\"></i><p>'+val.location+'</p>  </div></div><div class=\"clear\"></div><div class=\"conte-edificio-evento edicicio-T\"><i class=\"icono-edificio-evento\"></i><p class=\"nombre-edificio\">'+val.location+'</p></div></div>')\n\t});\n\t//Lanzo Mapa\n\tpintarMapa();\n\tlistEventos.html('');\n\t//Aqui voy a recorer los eventos de la siguiente hora\n\t$.each(siguienteHora, function(index, val) {\n\t\tlistEventos.append('<tr><td>'+val.summary+'</td><td>'+formartFecha(val.start.dateTime,1)+'</td><td>'+formartFecha(val.start.dateTime,2)+'</td><td>'+val.location+'</td></tr>');\n\t});\n\n}\n\nfunction pintarMapa() {\n\tvar svg=jQuery(\"\")\n}\n\nfunction formartFecha(fecha,tipo){\n\tvar fechaFinal,\n\t\tfechaIngresa = new Date(fecha);\n\t\n\tswitch(tipo){\n\t\tcase 1:\n\t\t\t//Hora\n\t\t\tvar h = fechaIngresa.getHours();\n\t\t\tvar m = fechaIngresa.getMinutes();\n\n\t\t\tvar us = 'AM';\n\t\t\tif(h>=12){\n\t\t\t\th=h-12;\n\t\t\t\tus = 'PM';\n\t\t\t}\n\t\t\tif(m<10){\n\t\t\t\tm = '0'+m;\n\t\t\t}\n\t\t\tfechaFinal = h+':'+m+' '+us;\n\t\tbreak;\n\t\tcase 2:\n\t\t\t//fecha\n\t\t\tvar monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\t\t\tvar m = monthNames[fechaIngresa.getMonth()]\n\t\t\tvar d = fechaIngresa.getDate();\n\t\t\tvar y = fechaIngresa.getFullYear();\n\t\t\tfechaFinal = m+' '+d+','+y;\n\t\tbreak;\n\t}\n\n\treturn fechaFinal;\n}\nfunction iniciarReloj(){\n\tvar today = new Date(),\n        mont = today.getMonth(),\n        day = today.getDate(),\n        year = today.getFullYear(),\n        h = today.getHours(),\n        m = today.getMinutes(),\n        s = today.getSeconds(),\n        m = checkTime(m),\n        s = checkTime(s);\n    var monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n  \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n];\n    document.getElementById('reloj').innerHTML = monthNames[mont]+\" \"+day+\",\"+year+\" \"+h + \":\" + m + \":\"+s;\n    var t = setTimeout(iniciarReloj, 500);\n}\nfunction checkTime(i) {\n    if (i < 10) {i = \"0\" + i};  // add zero in front of numbers < 10\n    return i;\n}\t"]}